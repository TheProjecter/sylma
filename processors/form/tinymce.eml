<?xml version="1.0" encoding="utf-8"?>
<le:action xmlns:le="http://www.sylma.org/execution" xmlns:li="http://www.sylma.org/interface" xmlns="http://www.w3.org/1999/xhtml">
  <le:settings>
    <le:name>TinyMCE Editor</le:name>
  </le:settings>
  <le:window>
    <li:add-js le:format="string">
      <le:get-settings>javascript/lib</le:get-settings>
      <le:argument>/tiny_mce/tiny_mce.js</le:argument>
    </li:add-js>
    <li:add-js>
      <le:null/>
      <le:argument><![CDATA[tinyMCE.init({
  mode : "textareas",
  theme : "advanced",
  plugins : "style",
  theme_advanced_buttons1 : "bold,italic,|,mylink,unlink,bullist,|,removeformat,undo,redo", //|,styleselect,styleprops,
  theme_advanced_buttons2 : "", 
  theme_advanced_buttons3 : "",
  editor_selector : "mceEditor",
  entities : "",
  relative_urls : false,
  language : "fr",
  setup : function(ed) {
    ed.addButton('mylink',{
      title : 'Créer un hyperlien',
      'class' : 'mceIcon mce_link',
      onclick : function() {
        
        var link = ed.dom.getParent(ed.selection.getNode(), 'A');
        var url = ed.dom.getAttrib(link, 'href');
        var txt = "Créer un hyperlien :\nPlacez un / devant pour pointer à la racine du site\nEx: /contact"
        if (!url) url = '';
        
        url = prompt(("advanced_dlg.link_url", txt), url);
        
        if (!url) return false;
        else ed.execCommand('mceInsertLink', false, { href : url } );
    }});
  }
});]]></le:argument>
    </li:add-js>
  </le:window>
</le:action>
