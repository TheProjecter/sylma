<?xml version="1.0" encoding="utf-8"?>
<le:action xmlns:le="http://www.sylma.org/execution" xmlns:li="http://www.sylma.org/interface" xmlns:la="/sylma/processors/action-builder/schema" xmlns="http://www.w3.org/1999/xhtml">
  <le:settings>
    <le:name>Mozaic</le:name>
    <le:argument required="false" format="php-string" name="path">
      <le:validate return="true">
        <le:controler>
          <li:get-directory>
            <le:get-argument name="path"/>
          </li:get-directory>
        </le:controler>
      </le:validate>
      <le:default required="false">
        <le:user>
          <li:get-directory/>
        </le:user>
      </le:default>
    </le:argument>
    <le:processor path="/sylma/processors/action-builder" namespace="/sylma/processors/action-builder/schema"/>
    <le:path run="true">
      <li:get-directory>
        <li:get-parent set-variable="directory"/>
      </li:get-directory>
    </le:path>
  </le:settings>
  <la:layer name="mozaic" extend-base="sylma.explorer-classes">
    <la:property name="parentDirectory">
      <le:string>
        <le:get-argument name="path">
          <li:get-parent/>
        </le:get-argument>
      </le:string>
    </la:property>
    <div class="clear-block">
      <la:replace-events>
        <div>
          <a href="#">
            <la:event name="click"><![CDATA[$('explorer-messages').getChildren().fade('in').setStyle('height', 'auto');]]></la:event>
            <span>SM</span>
          </a>
          <a href="#">
            <la:event name="click"><![CDATA[var layer = %ref-object%;

sylma.explorer.tools.reset();

return layer.update({'path' : layer.parentDirectory});

]]></la:event>
            <img src="[$directory]/directory-up.png"/>
          </a>
          <span>
            <le:string>
              <le:get-argument name="path"/>
            </le:string>
          </span>
        </div>
      </la:replace-events>
      <le:get-argument return="false" name="path">
        <li:browse>
          <le:array/>
          <le:array>.svn,.sml</le:array>
          <le:integer>1</le:integer>
          <li:get-document>
            <li:parse>
              <le:document>
                <la:replace-events>
                  <le:template path="index.xsl">
                    <li:include-externals/>
                  </le:template>
                </la:replace-events>
              </le:document>
            </li:parse>
          </li:get-document>
        </li:browse>
      </le:get-argument>
    </div>
  </la:layer>
</le:action>
