<?xml version="1.0" encoding="utf-8"?>
<tst:tests xmlns:tst="http://www.sylma.org/parser/js/binder/test" xmlns="http://www.w3.org/1999/xhtml" xmlns:le="http://www.sylma.org/parser/action" xmlns:lm="http://www.sylma.org/parser/action/basic" xmlns:la="http://www.sylma.org/parser/js/binder">
  <tst:description>JS</tst:description>
  <tst:test name="Base object">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">world</div>
    </le:action>
    <tst:expected>
      var test = example.test;
      var node = test.getNode();

      return node.get('text') === 'world';
    </tst:expected>
  </tst:test>
  <tst:test name="Simple event">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">
        <la:event name="click">return %object%.getNode();</la:event>
        <p>hello</p>
      </div>
    </le:action>
    <tst:expected>
      var test = example.test;
      var node = test.node.fireEvent('click');

      return node.getChildren()[0].get('text') == 'hello';
    </tst:expected>
  </tst:test>
  <tst:test name="Sub object">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">
        <div>Hello world</div>
        <div la:class="sylma.ui.Base" la:name="sub">yup</div>
      </div>
    </le:action>
    <tst:expected>
      var test = example.test;

      var node = test.sub.node;

      return node.get('text') == 'yup';
    </tst:expected>
  </tst:test>
  <tst:test name="Sub object without name">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">
        <div>Hello world</div>
        <div la:class="sylma.ui.Base">
          <la:event name="mouseover">return %object%.getNode();</la:event>
          <span>bonsoir</span>
        </div>
      </div>
    </le:action>
    <tst:expected>
      var tmp = example.test.tmp;
      var node = tmp[0].node.fireEvent('mouseover');

      return node.getChildren()[0].get('text') == 'bonsoir';
    </tst:expected>
  </tst:test>
  <tst:test name="Simple property">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">
        <la:property name="directory"><lm:directory/></la:property>
        <div>Hello world</div>
      </div>
    </le:action>
    <tst:expected>
      var test = example.test;

      return test.directory = '/sylma/parser/js/binder/test';
    </tst:expected>
  </tst:test>
  <tst:test name="Simple sub node">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">
        <div la:node="hello">Hello</div>
        <div>World</div>
      </div>
    </le:action>
    <tst:expected>
      var test = example.test;

      return test.getNode('hello').get('text') === 'Hello';
    </tst:expected>
  </tst:test>
  <tst:test name="Multiple sub nodes">
    <le:action>
      <div la:class="sylma.ui.Base" la:parent="example" la:name="test">
        <p>Bla bla bla</p>
        <div la:node="hello">Hello</div>
        <div la:node="world">World</div>
      </div>
    </le:action>
    <tst:expected>
      var test = example.test;

      return test.getNode('hello').get('text') === 'Hello' &amp;&amp; test.getNode('world').get('text') === 'World';
    </tst:expected>
  </tst:test>
</tst:tests>